{"version":3,"file":"URDFClasses.js","sources":["../src/URDFClasses.js"],"sourcesContent":["import { Object3D, Quaternion } from 'three';\n\nfunction URDFColliderClone(...args) {\n\n    const proto = Object.getPrototypeOf(this);\n    const result = proto.clone.call(this, ...args);\n    result.isURDFCollider = true;\n    return result;\n\n};\n\nfunction makeURDFCollider(object) {\n\n    object.isURDFCollider = true;\n    object.clone = URDFColliderClone;\n\n}\n\nclass URDFLink extends Object3D {\n\n    constructor(...args) {\n\n        super(...args);\n        this.isURDFLink = true;\n        this.type = 'URDFLink';\n        this.urdfNode = null;\n\n    }\n\n    show() {\n        this.visible = true;\n    }\n\n    hide() {\n        this.visible = false;\n    }\n\n    delete() {\n        this.parent.remove(this);\n        this.children.map(child => {\n            this.remove(child);\n        });\n    }\n\n    copy(source, recursive) {\n\n        super.copy(source, recursive);\n        this.urdfNode = source.urdfNode;\n\n        return this;\n\n    }\n\n}\n\nclass URDFJoint extends Object3D {\n\n    get jointType() {\n\n        return this._jointType;\n\n    }\n    set jointType(v) {\n\n        if (this.jointType === v) return;\n        this._jointType = v;\n\n        switch (v) {\n\n            case 'fixed':\n            case 'continuous':\n            case 'revolute':\n            case 'prismatic':\n                this.jointValue = 0;\n                break;\n\n            case 'planar':\n                this.jointValue = new Array(2).fill(0);\n                break;\n\n            case 'floating':\n                this.jointValue = new Array(6).fill(0);\n                break;\n\n        }\n\n    }\n\n    get angle() {\n\n        return this.jointValue;\n\n    }\n\n    constructor(...args) {\n        super(...args);\n\n        this.isURDFJoint = true;\n        this.type = 'URDFJoint';\n\n        this.urdfNode = null;\n        this.jointValue = null;\n        this.jointType = 'fixed';\n        this.axis = null;\n        this.limit = { lower: 0, upper: 0 };\n        this.ignoreLimits = false;\n\n        this.origPosition = null;\n        this.origQuaternion = null;\n    }\n\n    /* Overrides */\n    copy(source, recursive) {\n\n        super.copy(source, recursive);\n\n        this.urdfNode = source.urdfNode;\n        this.jointType = source.jointType;\n        this.axis = source.axis ? source.axis.clone() : null;\n        this.limit.lower = source.limit.lower;\n        this.limit.upper = source.limit.upper;\n        this.ignoreLimits = false;\n\n        this.jointValue = Array.isArray(source.jointValue) ? [...source.jointValue] : source.jointValue;\n\n        this.origPosition = source.origPosition ? source.origPosition.clone() : null;\n        this.origQuaternion = source.origQuaternion ? source.origQuaternion.clone() : null;\n\n        return this;\n    }\n\n    /* Public Functions */\n    setAngle(...values) {\n        return this.setOffset(...values);\n    }\n\n    setOffset(...values) {\n\n        values = values.map(v => parseFloat(v));\n\n        if (!this.origPosition || !this.origQuaternion) {\n\n            this.origPosition = this.position.clone();\n            this.origQuaternion = this.quaternion.clone();\n\n        }\n\n        switch (this.jointType) {\n\n            case 'fixed': {\n                break;\n            }\n            case 'continuous':\n            case 'revolute': {\n\n                let angle = values[0];\n                if (angle == null) break;\n                if (angle === this.jointValue) break;\n\n                if (!this.ignoreLimits && this.jointType === 'revolute') {\n\n                    angle = Math.min(this.limit.upper, angle);\n                    angle = Math.max(this.limit.lower, angle);\n\n                }\n\n                // FromAxisAngle seems to rotate the opposite of the\n                // expected angle for URDF, so negate it here\n                const delta = new Quaternion().setFromAxisAngle(this.axis, angle);\n                this.quaternion.multiplyQuaternions(this.origQuaternion, delta);\n\n                this.jointValue = angle;\n                this.matrixWorldNeedsUpdate = true;\n\n                break;\n            }\n\n            case 'prismatic': {\n\n                let angle = values[0];\n                if (angle == null) break;\n                if (angle === this.jointValue) break;\n\n                if (!this.ignoreLimits) {\n\n                    angle = Math.min(this.limit.upper, angle);\n                    angle = Math.max(this.limit.lower, angle);\n\n                }\n\n                this.position.copy(this.origPosition);\n                this.position.addScaledVector(this.axis, angle);\n\n                this.jointValue = angle;\n                this.worldMatrixNeedsUpdate = true;\n                break;\n\n            }\n\n            case 'floating':\n            case 'planar':\n                // TODO: Support these joint types\n                console.warn(`'${ this.jointType }' joint not yet supported`);\n\n        }\n\n        return this.jointValue;\n\n    }\n\n}\n\nclass URDFRobot extends URDFLink {\n\n    constructor(...args) {\n\n        super(...args);\n        this.isURDFRobot = true;\n        this.urdfNode = null;\n\n        this.urdfRobotNode = null;\n        this.robotName = null;\n\n        this.links = null;\n        this.joints = null;\n\n    }\n\n    copy(source, recursive) {\n\n        super.copy(source, recursive);\n\n        this.urdfRobotNode = source.urdfRobotNode;\n        this.robotName = source.robotName;\n\n        this.links = {};\n        this.joints = {};\n\n        this.traverse(c => {\n\n            if (c.isURDFJoint && c.name in source.joints) {\n\n                this.joints[c.name] = c;\n\n            }\n\n            if (c.isURDFLink && c.name in source.links) {\n\n                this.links[c.name] = c;\n\n            }\n\n        });\n\n        return this;\n\n    }\n\n    setAngle(jointName, ...angle) {\n\n        const joint = this.joints[jointName];\n        if (joint) {\n\n            return joint.setAngle(...angle);\n\n        }\n\n        return null;\n    }\n\n    setAngles(angles) {\n\n        // TODO: How to handle other, multi-dimensional joint types?\n        for (const name in angles) this.setAngle(name, angles[name]);\n\n    }\n\n}\n\nexport { URDFRobot, URDFLink, URDFJoint, makeURDFCollider };\n"],"names":["URDFColliderClone","_proto$clone","proto","Object","getPrototypeOf","_len","arguments","length","args","Array","_key","result","clone","call","apply","concat","isURDFCollider","makeURDFCollider","object","URDFLink","_Object3D","_this","_classCallCheck","_len2","_key2","_callSuper","isURDFLink","type","urdfNode","_inherits","_createClass","key","value","show","visible","hide","_delete","_this2","parent","remove","children","map","child","copy","source","recursive","_get","_getPrototypeOf","prototype","Object3D","URDFJoint","_Object3D2","_this3","_len3","_key3","isURDFJoint","jointValue","jointType","axis","limit","lower","upper","ignoreLimits","origPosition","origQuaternion","get","_jointType","set","v","fill","isArray","_toConsumableArray","setAngle","setOffset","_len4","values","_key4","parseFloat","position","quaternion","angle","Math","min","max","delta","Quaternion","setFromAxisAngle","multiplyQuaternions","matrixWorldNeedsUpdate","addScaledVector","worldMatrixNeedsUpdate","console","warn","URDFRobot","_URDFLink","_this4","_len5","_key5","isURDFRobot","urdfRobotNode","robotName","links","joints","_this5","traverse","c","name","jointName","joint","_len6","_key6","setAngles","angles"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}