{"version":3,"file":"URDFLoader.js","sources":["../src/URDFClasses.js","../src/URDFLoader.js"],"sourcesContent":["import { Object3D, Vector3 } from 'three';\n\nconst _tempAxis = new Vector3();\n\nclass URDFBase extends Object3D {\n\n    constructor(...args) {\n\n        super(...args);\n        this.urdfNode = null;\n        this.urdfName = '';\n\n    }\n\n    copy(source, recursive) {\n\n        super.copy(source, recursive);\n\n        this.urdfNode = source.urdfNode;\n        this.urdfName = source.urdfName;\n\n        return this;\n\n    }\n\n}\n\nclass URDFCollider extends URDFBase {\n\n    constructor(...args) {\n\n        super(...args);\n        this.isURDFCollider = true;\n        this.type = 'URDFCollider';\n\n    }\n\n}\n\nclass URDFVisual extends URDFBase {\n\n    constructor(...args) {\n\n        super(...args);\n        this.isURDFVisual = true;\n        this.type = 'URDFVisual';\n\n    }\n\n}\n\nclass URDFLink extends URDFBase {\n\n    constructor(...args) {\n\n        super(...args);\n        this.isURDFLink = true;\n        this.type = 'URDFLink';\n\n    }\n\n}\n\nclass URDFJoint extends URDFBase {\n\n\n\n    get jointType() {\n        console.log('Accessing jointType:', this._jointType);\n        return this._jointType;\n    }\n\n    set jointType(v) {\n        console.log('Setting jointType from', this.jointType, 'to', v);\n        if (this.jointType === v) return;\n        this._jointType = v;\n        this.matrixWorldNeedsUpdate = true;\n        switch (v) {\n            case 'fixed':\n                this.jointValue = [];\n                break;\n            case 'continuous':\n            case 'revolute':\n            case 'prismatic':\n                this.jointValue = new Array(1).fill(0);\n                break;\n            case 'planar':\n                this.jointValue = new Array(2).fill(0);\n                break;\n            case 'floating':\n                this.jointValue = new Array(6).fill(0);\n                break;\n        }\n    }\n\n    get angle() {\n        console.log('Getting angle:', this.jointValue[0]);\n        return this.jointValue[0];\n    }\n\n    constructor(...args) {\n        super(...args);\n        this.isURDFJoint = true;\n        this.type = 'URDFJoint';\n        this.jointValue = null;\n        this.jointType = 'fixed';\n        this.axis = new Vector3(1, 0, 0);\n        this.limit = { lower: 0, upper: 0 };\n        this.ignoreLimits = false;\n        this.origPosition = null;\n        this.origQuaternion = null;\n        this.mimicJoints = [];\n        this.dependentMimicJoints = [];\n    }\n\n    copy(source, recursive) {\n        super.copy(source, recursive);\n        console.log('Copying properties from source', source);\n        this.jointType = source.jointType;\n        this.axis = source.axis.clone();\n        this.limit.lower = source.limit.lower;\n        this.limit.upper = source.limit.upper;\n        this.ignoreLimits = source.ignoreLimits;\n        this.jointValue = [...source.jointValue];\n        this.origPosition = source.origPosition ? source.origPosition.clone() : null;\n        this.origQuaternion = source.origQuaternion ? source.origQuaternion.clone() : null;\n        this.mimicJoints = [...source.mimicJoints];\n        this.dependentMimicJoints = source.dependentMimicJoints.map(joint => joint.clone());\n    }\n\n    setJointValue(...values) {\n        console.log('Initial values received:', values);\n        values = values.map(v => v === null ? null : parseFloat(v));\n        console.log('Parsed values:', values);\n        if (!this.origPosition || !this.origQuaternion) {\n            console.log('Initializing original position and quaternion');\n            this.origPosition = this.position.clone();\n            this.origQuaternion = this.quaternion.clone();\n        }\n\n        //console.log(this.dependentMimicJoints[0]);\n        let didUpdate = false;\n        this.dependentMimicJoints.forEach(mimicJoint => {\n            const mimicValues = values.map(value => value * mimicJoint.multiplier + mimicJoint.offset);\n\n            const angle = mimicValues[0]; // the angle in radians\n        \n            // Determine which axis is dominant for the rotation\n            const axis = mimicJoint.axis;\n            let axisVector = new THREE.Vector3();\n            if (axis.x !== 0) axisVector.set(1, 0, 0);\n            else if (axis.y !== 0) axisVector.set(0, 1, 0);\n            else if (axis.z !== 0) axisVector.set(0, 0, 1);\n        \n            // Convert the angle to a quaternion based on the dominant axis\n            const quaternion = new THREE.Quaternion().setFromAxisAngle(axisVector, angle);\n        \n            // Assign the computed quaternion to the mimic joint\n            mimicJoint.quaternion.copy(quaternion);\n        \n            console.log('Updated Quaternion:', mimicJoint.quaternion);\n        \n            // Assuming setJointValue should now simply accept the quaternion for direct manipulation\n            didUpdate = mimicJoint.setJointValue(mimicJoint.quaternion) || didUpdate;\n        });\n        \n\n        switch (this.jointType) {\n            case 'fixed':\n                break;\n            case 'continuous':\n            case 'revolute':\n                let angle = values[0];\n                console.log('Current angle:', angle);\n                if (!this.ignoreLimits && this.jointType === 'revolute') {\n                    angle = Math.min(this.limit.upper, angle);\n                    angle = Math.max(this.limit.lower, angle);\n                    console.log('Angle adjusted within limits:', angle);\n                }\n                this.quaternion.setFromAxisAngle(this.axis, angle).premultiply(this.origQuaternion);\n                if (this.jointValue[0] !== angle) {\n                    this.jointValue[0] = angle;\n                    this.matrixWorldNeedsUpdate = true;\n                    didUpdate = true;\n                    console.log('Angle updated to:', angle);\n                }\n                break;\n            case 'prismatic':\n                let pos = values[0];\n                console.log('Current position:', pos);\n                if (!this.ignoreLimits) {\n                    pos = Math.min(this.limit.upper, pos);\n                    pos = Math.max(this.limit.lower, pos);\n                    console.log('Position adjusted within limits:', pos);\n                }\n                this.position.copy(this.origPosition);\n                _tempAxis.copy(this.axis).applyEuler(this.rotation);\n                this.position.addScaledVector(_tempAxis, pos);\n                if (this.jointValue[0] !== pos) {\n                    this.jointValue[0] = pos;\n                    this.matrixWorldNeedsUpdate = true;\n                    didUpdate = true;\n                    console.log('Position updated to:', pos);\n                }\n                break;\n            case 'floating':\n            case 'planar':\n                console.warn(`'${this.jointType}' joint not yet supported`);\n        }\n\n        console.log('Did update:', didUpdate);\n\n        console.log(this.urdfName);\n        console.log(this.rotation);\n\n        return didUpdate;\n    }\n\n    addDependentMimicJoint(mimicJoint) {\n        console.log('Adding dependent mimic joint:', mimicJoint);\n        if (!this.dependentMimicJoints.includes(mimicJoint)) {\n            this.dependentMimicJoints.push(mimicJoint);\n        }\n    }\n}\n\nclass URDFMimicJoint extends URDFJoint {\n\n    constructor(...args) {\n\n        super(...args);\n        this.type = 'URDFMimicJoint';\n        this.mimicJoint = null;\n        this.offset = 0;\n        this.multiplier = 1;\n\n    }\n\n    updateFromMimickedJoint(...values) {\n\n        const modifiedValues = values.map(x => x * this.multiplier + this.offset);\n        return super.setJointValue(...modifiedValues);\n\n    }\n\n    /* Overrides */\n    copy(source, recursive) {\n\n        super.copy(source, recursive);\n\n        this.mimicJoint = source.mimicJoint;\n        this.offset = source.offset;\n        this.multiplier = source.multiplier;\n\n        return this;\n\n    }\n\n}\n\nclass URDFRobot extends URDFLink {\n\n    constructor(...args) {\n\n        super(...args);\n        this.isURDFRobot = true;\n        this.urdfNode = null;\n\n        this.urdfRobotNode = null;\n        this.robotName = null;\n\n        this.links = null;\n        this.joints = null;\n        this.colliders = null;\n        this.visual = null;\n        this.frames = null;\n\n    }\n\n    copy(source, recursive) {\n\n        super.copy(source, recursive);\n\n        this.urdfRobotNode = source.urdfRobotNode;\n        this.robotName = source.robotName;\n\n        this.links = {};\n        this.joints = {};\n        this.colliders = {};\n        this.visual = {};\n\n        this.traverse(c => {\n\n            if (c.isURDFJoint && c.urdfName in source.joints) {\n\n                this.joints[c.urdfName] = c;\n\n            }\n\n            if (c.isURDFLink && c.urdfName in source.links) {\n\n                this.links[c.urdfName] = c;\n\n            }\n\n            if (c.isURDFCollider && c.urdfName in source.colliders) {\n\n                this.colliders[c.urdfName] = c;\n\n            }\n\n            if (c.isURDFVisual && c.urdfName in source.visual) {\n\n                this.visual[c.urdfName] = c;\n\n            }\n\n        });\n\n        // Repair mimic joint references once we've re-accumulated all our joint data\n        for (const joint in this.joints) {\n            this.joints[joint].mimicJoints = this.joints[joint].mimicJoints.map((mimicJoint) => this.joints[mimicJoint.name]);\n        }\n\n        this.frames = {\n            ...this.colliders,\n            ...this.visual,\n            ...this.links,\n            ...this.joints,\n        };\n\n        return this;\n\n    }\n\n    getFrame(name) {\n\n        return this.frames[name];\n\n    }\n\n    setJointValue(jointName, ...angle) {\n\n        const joint = this.joints[jointName];\n        if (joint) {\n\n            return joint.setJointValue(...angle);\n\n        }\n\n        return false;\n    }\n\n    setJointValues(values) {\n\n        let didChange = false;\n        for (const name in values) {\n\n            const value = values[name];\n            if (Array.isArray(value)) {\n\n                didChange = this.setJointValue(name, ...value) || didChange;\n\n            } else {\n\n                didChange = this.setJointValue(name, value) || didChange;\n\n            }\n\n        }\n\n        return didChange;\n\n    }\n\n}\n\nexport { URDFRobot, URDFLink, URDFJoint, URDFMimicJoint, URDFVisual, URDFCollider };","import * as THREE from 'three';\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader.js';\nimport { ColladaLoader } from 'three/examples/jsm/loaders/ColladaLoader.js';\nimport { URDFRobot, URDFJoint, URDFLink, URDFCollider, URDFVisual, URDFMimicJoint } from './URDFClasses.js';\n\n/*\nReference coordinate frames for THREE.js and ROS.\nBoth coordinate systems are right handed so the URDF is instantiated without\nframe transforms. The resulting model can be rotated to rectify the proper up,\nright, and forward directions\n\nTHREE.js\n   Y\n   |\n   |\n   .-----X\n ／\nZ\n\nROS URDf\n       Z\n       |   X\n       | ／\n Y-----.\n\n*/\n\nconst tempQuaternion = new THREE.Quaternion();\nconst tempEuler = new THREE.Euler();\n\n// take a vector \"x y z\" and process it into\n// an array [x, y, z]\nfunction processTuple(val) {\n\n    if (!val) return [0, 0, 0];\n    return val.trim().split(/\\s+/g).map(num => parseFloat(num));\n\n}\n\n// applies a rotation a threejs object in URDF order\nfunction applyRotation(obj, rpy, additive = false) {\n\n    // if additive is true the rotation is applied in\n    // addition to the existing rotation\n    if (!additive) obj.rotation.set(0, 0, 0);\n\n    tempEuler.set(rpy[0], rpy[1], rpy[2], 'ZYX');\n    tempQuaternion.setFromEuler(tempEuler);\n    tempQuaternion.multiply(obj.quaternion);\n    obj.quaternion.copy(tempQuaternion);\n\n}\n\n/* URDFLoader Class */\n// Loads and reads a URDF file into a THREEjs Object3D format\nexport default\n    class URDFLoader {\n\n    constructor(manager) {\n\n        this.manager = manager || THREE.DefaultLoadingManager;\n        this.loadMeshCb = this.defaultMeshLoader.bind(this);\n        this.parseVisual = true;\n        this.parseCollision = false;\n        this.packages = '';\n        this.workingPath = '';\n        this.fetchOptions = {};\n\n    }\n\n    /* Public API */\n    loadAsync(urdf) {\n\n        return new Promise((resolve, reject) => {\n\n            this.load(urdf, resolve, null, reject);\n\n        });\n\n    }\n\n    // urdf:    The path to the URDF within the package OR absolute\n    // onComplete:      Callback that is passed the model once loaded\n    load(urdf, onComplete, onProgress, onError) {\n\n        // Check if a full URI is specified before\n        // prepending the package info\n        const manager = this.manager;\n        const workingPath = THREE.LoaderUtils.extractUrlBase(urdf);\n        const urdfPath = this.manager.resolveURL(urdf);\n\n        manager.itemStart(urdfPath);\n\n        fetch(urdfPath, this.fetchOptions)\n            .then(res => {\n\n                if (res.ok) {\n\n                    if (onProgress) {\n\n                        onProgress(null);\n\n                    }\n                    return res.text();\n\n                } else {\n\n                    throw new Error(`URDFLoader: Failed to load url '${urdfPath}' with error code ${res.status} : ${res.statusText}.`);\n\n                }\n\n            })\n            .then(data => {\n\n                if (this.workingPath === '') {\n\n                    this.workingPath = workingPath;\n\n                }\n\n                const model = this.parse(data);\n                onComplete(model);\n                manager.itemEnd(urdfPath);\n\n            })\n            .catch(e => {\n\n                if (onError) {\n\n                    onError(e);\n\n                } else {\n\n                    console.error('URDFLoader: Error loading file.', e);\n\n                }\n                manager.itemError(urdfPath);\n                manager.itemEnd(urdfPath);\n\n            });\n\n    }\n\n    parse(content) {\n\n        const packages = this.packages;\n        const loadMeshCb = this.loadMeshCb;\n        const parseVisual = this.parseVisual;\n        const parseCollision = this.parseCollision;\n        const workingPath = this.workingPath;\n        const manager = this.manager;\n        const linkMap = {};\n        const jointMap = {};\n        const materialMap = {};\n\n        // Resolves the path of mesh files\n        function resolvePath(path) {\n\n            if (!/^package:\\/\\//.test(path)) {\n\n                return workingPath ? workingPath + path : path;\n\n            }\n\n            // Remove \"package://\" keyword and split meshPath at the first slash\n            const [targetPkg, relPath] = path.replace(/^package:\\/\\//, '').split(/\\/(.+)/);\n\n            if (typeof packages === 'string') {\n\n                // \"pkg\" is one single package\n                if (packages.endsWith(targetPkg)) {\n\n                    // \"pkg\" is the target package\n                    return packages + '/' + relPath;\n\n                } else {\n\n                    // Assume \"pkg\" is the target package's parent directory\n                    return packages + '/' + targetPkg + '/' + relPath;\n\n                }\n\n            } else if (packages instanceof Function) {\n\n                return packages(targetPkg) + '/' + relPath;\n\n            } else if (typeof packages === 'object') {\n\n                // \"pkg\" is a map of packages\n                if (targetPkg in packages) {\n\n                    return packages[targetPkg] + '/' + relPath;\n\n                } else {\n\n                    console.error(`URDFLoader : ${targetPkg} not found in provided package list.`);\n                    return null;\n\n                }\n\n            }\n\n        }\n\n        // Process the URDF text format\n        function processUrdf(data) {\n\n            let children;\n            if (data instanceof Document) {\n\n                children = [...data.children];\n\n            } else if (data instanceof Element) {\n\n                children = [data];\n\n            } else {\n\n                const parser = new DOMParser();\n                const urdf = parser.parseFromString(data, 'text/xml');\n                children = [...urdf.children];\n\n            }\n\n            const robotNode = children.filter(c => c.nodeName === 'robot').pop();\n            return processRobot(robotNode);\n\n        }\n\n        // Process the <robot> node\n        function processRobot(robot) {\n\n            const robotNodes = [...robot.children];\n            const links = robotNodes.filter(c => c.nodeName.toLowerCase() === 'link');\n            const joints = robotNodes.filter(c => c.nodeName.toLowerCase() === 'joint');\n            const materials = robotNodes.filter(c => c.nodeName.toLowerCase() === 'material');\n            const obj = new URDFRobot();\n\n            obj.robotName = robot.getAttribute('name');\n            obj.urdfRobotNode = robot;\n\n            // Create the <material> map\n            materials.forEach(m => {\n\n                const name = m.getAttribute('name');\n                materialMap[name] = processMaterial(m);\n\n            });\n\n            // Create the <link> map\n            const visualMap = {};\n            const colliderMap = {};\n            links.forEach(l => {\n\n                const name = l.getAttribute('name');\n                const isRoot = robot.querySelector(`child[link=\"${name}\"]`) === null;\n                linkMap[name] = processLink(l, visualMap, colliderMap, isRoot ? obj : null);\n\n            });\n\n            // Create the <joint> map\n            joints.forEach(j => {\n\n                const name = j.getAttribute('name');\n                jointMap[name] = processJoint(j);\n\n            });\n\n            obj.joints = jointMap;\n            obj.links = linkMap;\n            obj.colliders = colliderMap;\n            obj.visual = visualMap;\n\n            // Link up mimic joints\n            const jointList = Object.values(jointMap);\n            jointList.forEach(j => {\n\n                if (j instanceof URDFMimicJoint) {\n\n                    jointMap[j.mimicJoint].mimicJoints.push(j);\n\n                }\n\n            });\n\n            // Detect infinite loops of mimic joints\n            jointList.forEach(j => {\n\n                const uniqueJoints = new Set();\n                const iterFunction = joint => {\n\n                    if (uniqueJoints.has(joint)) {\n\n                        throw new Error('URDFLoader: Detected an infinite loop of mimic joints.');\n\n                    }\n\n                    uniqueJoints.add(joint);\n                    joint.mimicJoints.forEach(j => {\n\n                        iterFunction(j);\n\n                    });\n\n                };\n\n                iterFunction(j);\n            });\n\n            obj.frames = {\n                ...colliderMap,\n                ...visualMap,\n                ...linkMap,\n                ...jointMap,\n            };\n\n            return obj;\n\n        }// Process joint nodes and parent them\n        function processJoint(joint) {\n            const children = [...joint.children];\n            const jointType = joint.getAttribute('type');\n            let obj;\n\n            const mimicTag = children.find(n => n.nodeName.toLowerCase() === 'mimic');\n            if (mimicTag) {\n                obj = new URDFMimicJoint();\n                obj.mimicJoint = mimicTag.getAttribute('joint');\n                obj.multiplier = parseFloat(mimicTag.getAttribute('multiplier') || 1.0);\n                obj.offset = parseFloat(mimicTag.getAttribute('offset') || 0.0);\n\n                console.log('MIMIC: ', obj);\n            } else {\n                obj = new URDFJoint();\n            }\n\n            obj.urdfNode = joint;\n            obj.name = joint.getAttribute('name');\n            obj.urdfName = obj.name;\n            obj.jointType = jointType;\n\n            let parent = null;\n            let child = null;\n            let xyz = [0, 0, 0];\n            let rpy = [0, 0, 0];\n\n            // Extract the attributes\n            children.forEach(n => {\n                const type = n.nodeName.toLowerCase();\n                if (type === 'origin') {\n                    xyz = processTuple(n.getAttribute('xyz'));\n                    rpy = processTuple(n.getAttribute('rpy'));\n                } else if (type === 'child') {\n                    child = linkMap[n.getAttribute('link')];\n                } else if (type === 'parent') {\n                    parent = linkMap[n.getAttribute('link')];\n                } else if (type === 'limit') {\n                    obj.limit.lower = parseFloat(n.getAttribute('lower') || obj.limit.lower);\n                    obj.limit.upper = parseFloat(n.getAttribute('upper') || obj.limit.upper);\n                }\n            });\n\n            // Join the links\n            parent.add(obj);\n            obj.add(child);\n            applyRotation(obj, rpy);\n            obj.position.set(xyz[0], xyz[1], xyz[2]);\n\n            // Set up the rotate function\n            const axisNode = children.filter(n => n.nodeName.toLowerCase() === 'axis')[0];\n            if (axisNode) {\n                const axisXYZ = axisNode.getAttribute('xyz').split(/\\s+/g).map(num => parseFloat(num));\n                obj.axis = new THREE.Vector3(axisXYZ[0], axisXYZ[1], axisXYZ[2]);\n                obj.axis.normalize();\n            }\n\n            // If it's a mimic joint, find its master joint and link them\n            if (mimicTag) {\n                const masterJointName = mimicTag.getAttribute('joint');\n                const masterJoint = jointMap[masterJointName]; // Assuming jointMap is a map from names to joint objects\n                if (masterJoint) {\n                    masterJoint.addDependentMimicJoint(obj);\n                }\n            }\n\n            return obj;\n        }\n\n        // Process the <link> nodes\n        function processLink(link, visualMap, colliderMap, target = null) {\n\n            if (target === null) {\n\n                target = new URDFLink();\n\n            }\n\n            const children = [...link.children];\n            target.name = link.getAttribute('name');\n            target.urdfName = target.name;\n            target.urdfNode = link;\n\n            if (parseVisual) {\n\n                const visualNodes = children.filter(n => n.nodeName.toLowerCase() === 'visual');\n                visualNodes.forEach(vn => {\n\n                    const v = processLinkElement(vn, materialMap);\n                    target.add(v);\n\n                    if (vn.hasAttribute('name')) {\n\n                        const name = vn.getAttribute('name');\n                        v.name = name;\n                        v.urdfName = name;\n                        visualMap[name] = v;\n\n                    }\n\n                });\n\n            }\n\n            if (parseCollision) {\n\n                const collisionNodes = children.filter(n => n.nodeName.toLowerCase() === 'collision');\n                collisionNodes.forEach(cn => {\n\n                    const c = processLinkElement(cn);\n                    target.add(c);\n\n                    if (cn.hasAttribute('name')) {\n\n                        const name = cn.getAttribute('name');\n                        c.name = name;\n                        c.urdfName = name;\n                        colliderMap[name] = c;\n\n                    }\n\n                });\n\n            }\n\n            return target;\n\n        }\n\n        function processMaterial(node) {\n\n            const matNodes = [...node.children];\n            const material = new THREE.MeshPhongMaterial();\n\n            material.name = node.getAttribute('name') || '';\n            matNodes.forEach(n => {\n\n                const type = n.nodeName.toLowerCase();\n                if (type === 'color') {\n\n                    const rgba =\n                        n\n                            .getAttribute('rgba')\n                            .split(/\\s/g)\n                            .map(v => parseFloat(v));\n\n                    material.color.setRGB(rgba[0], rgba[1], rgba[2]);\n                    material.opacity = rgba[3];\n                    material.transparent = rgba[3] < 1;\n                    material.depthWrite = !material.transparent;\n\n                } else if (type === 'texture') {\n\n                    // The URDF spec does not require that the <texture/> tag include\n                    // a filename attribute so skip loading the texture if not provided.\n                    const filename = n.getAttribute('filename');\n                    if (filename) {\n\n                        const loader = new THREE.TextureLoader(manager);\n                        const filePath = resolvePath(filename);\n                        material.map = loader.load(filePath);\n                        material.map.colorSpace = THREE.SRGBColorSpace;\n\n                    }\n\n                }\n            });\n\n            return material;\n\n        }\n\n        // Process the visual and collision nodes into meshes\n        function processLinkElement(vn, materialMap = {}) {\n\n            const isCollisionNode = vn.nodeName.toLowerCase() === 'collision';\n            const children = [...vn.children];\n            let material = null;\n\n            // get the material first\n            const materialNode = children.filter(n => n.nodeName.toLowerCase() === 'material')[0];\n            if (materialNode) {\n\n                const name = materialNode.getAttribute('name');\n                if (name && name in materialMap) {\n\n                    material = materialMap[name];\n\n                } else {\n\n                    material = processMaterial(materialNode);\n\n                }\n\n            } else {\n\n                material = new THREE.MeshPhongMaterial();\n\n            }\n\n            const group = isCollisionNode ? new URDFCollider() : new URDFVisual();\n            group.urdfNode = vn;\n\n            children.forEach(n => {\n\n                const type = n.nodeName.toLowerCase();\n                if (type === 'geometry') {\n\n                    const geoType = n.children[0].nodeName.toLowerCase();\n                    if (geoType === 'mesh') {\n\n                        const filename = n.children[0].getAttribute('filename');\n                        const filePath = resolvePath(filename);\n\n                        // file path is null if a package directory is not provided.\n                        if (filePath !== null) {\n\n                            const scaleAttr = n.children[0].getAttribute('scale');\n                            if (scaleAttr) {\n\n                                const scale = processTuple(scaleAttr);\n                                group.scale.set(scale[0], scale[1], scale[2]);\n\n                            }\n\n                            loadMeshCb(filePath, manager, (obj, err) => {\n\n                                if (err) {\n\n                                    console.error('URDFLoader: Error loading mesh.', err);\n\n                                } else if (obj) {\n\n                                    if (obj instanceof THREE.Mesh) {\n\n                                        obj.material = material;\n\n                                    }\n\n                                    // We don't expect non identity rotations or positions. In the case of\n                                    // COLLADA files the model might come in with a custom scale for unit\n                                    // conversion.\n                                    obj.position.set(0, 0, 0);\n                                    obj.quaternion._x = 0;\n                                    obj.quaternion._y = 0;\n                                    obj.quaternion._z = 0;\n                                    obj.quaternion._w = 0;\n                                    group.add(obj);\n\n                                }\n\n                            });\n\n                        }\n\n                    } else if (geoType === 'box') {\n\n                        const primitiveModel = new THREE.Mesh();\n                        primitiveModel.geometry = new THREE.BoxGeometry(1, 1, 1);\n                        primitiveModel.material = material;\n\n                        const size = processTuple(n.children[0].getAttribute('size'));\n                        primitiveModel.scale.set(size[0], size[1], size[2]);\n\n                        group.add(primitiveModel);\n\n                    } else if (geoType === 'sphere') {\n\n                        const primitiveModel = new THREE.Mesh();\n                        primitiveModel.geometry = new THREE.SphereGeometry(1, 30, 30);\n                        primitiveModel.material = material;\n\n                        const radius = parseFloat(n.children[0].getAttribute('radius')) || 0;\n                        primitiveModel.scale.set(radius, radius, radius);\n\n                        group.add(primitiveModel);\n\n                    } else if (geoType === 'cylinder') {\n\n                        const primitiveModel = new THREE.Mesh();\n                        primitiveModel.geometry = new THREE.CylinderGeometry(1, 1, 1, 30);\n                        primitiveModel.material = material;\n\n                        const radius = parseFloat(n.children[0].getAttribute('radius')) || 0;\n                        const length = parseFloat(n.children[0].getAttribute('length')) || 0;\n                        primitiveModel.scale.set(radius, length, radius);\n                        primitiveModel.rotation.set(Math.PI / 2, 0, 0);\n\n                        group.add(primitiveModel);\n\n                    }\n\n                } else if (type === 'origin') {\n\n                    const xyz = processTuple(n.getAttribute('xyz'));\n                    const rpy = processTuple(n.getAttribute('rpy'));\n\n                    group.position.set(xyz[0], xyz[1], xyz[2]);\n                    group.rotation.set(0, 0, 0);\n                    applyRotation(group, rpy);\n\n                }\n\n            });\n\n            return group;\n\n        }\n\n        return processUrdf(content);\n\n    }\n\n    // Default mesh loading function\n    defaultMeshLoader(path, manager, done) {\n\n        if (/\\.stl$/i.test(path)) {\n\n            const loader = new STLLoader(manager);\n            loader.load(path, geom => {\n                const mesh = new THREE.Mesh(geom, new THREE.MeshPhongMaterial());\n                done(mesh);\n            });\n\n        } else if (/\\.dae$/i.test(path)) {\n\n            const loader = new ColladaLoader(manager);\n            loader.load(path, dae => done(dae.scene));\n\n        } else {\n\n            console.warn(`URDFLoader: Could not load model at ${path}.\\nNo loader available`);\n\n        }\n\n    }\n\n};"],"names":["_tempAxis","Vector3","URDFBase","_Object3D","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","urdfNode","urdfName","_inherits","_createClass","key","value","copy","source","recursive","_get","_getPrototypeOf","prototype","call","Object3D","URDFCollider","_URDFBase","_this2","_len2","_key2","isURDFCollider","type","URDFVisual","_URDFBase2","_this3","_len3","_key3","isURDFVisual","URDFLink","_URDFBase3","_this4","_len4","_key4","isURDFLink","URDFJoint","_URDFBase4","_this5","_len5","_key5","isURDFJoint","jointValue","jointType","axis","limit","lower","upper","ignoreLimits","origPosition","origQuaternion","mimicJoints","dependentMimicJoints","get","console","log","_jointType","set","v","matrixWorldNeedsUpdate","fill","clone","_toConsumableArray","map","joint","setJointValue","_len6","values","_key6","parseFloat","position","quaternion","didUpdate","forEach","mimicJoint","mimicValues","multiplier","offset","angle","axisVector","THREE","x","y","z","Quaternion","setFromAxisAngle","Math","min","max","premultiply","pos","applyEuler","rotation","addScaledVector","warn","addDependentMimicJoint","includes","push","URDFMimicJoint","_URDFJoint","_this6","_len7","_key7","updateFromMimickedJoint","_this7","_get2","_len8","_key8","modifiedValues","apply","URDFRobot","_URDFLink","_this8","_len9","_key9","isURDFRobot","urdfRobotNode","robotName","links","joints","colliders","visual","frames","_this9","traverse","c","name","_objectSpread","getFrame","jointName","_len10","_key10","setJointValues","didChange","isArray","tempQuaternion","tempEuler","Euler","processTuple","val","trim","split","num","applyRotation","obj","rpy","additive","undefined","setFromEuler","multiply","URDFLoader","manager","DefaultLoadingManager","loadMeshCb","defaultMeshLoader","bind","parseVisual","parseCollision","packages","workingPath","fetchOptions","loadAsync","urdf","Promise","resolve","reject","load","onComplete","onProgress","onError","LoaderUtils","extractUrlBase","urdfPath","resolveURL","itemStart","fetch","then","res","ok","text","Error","status","statusText","data","model","parse","itemEnd","e","error","itemError","content","linkMap","jointMap","materialMap","resolvePath","path","test","_path$replace$split","replace","_path$replace$split2","_slicedToArray","targetPkg","relPath","endsWith","Function","_typeof","processUrdf","children","Document","Element","parser","DOMParser","parseFromString","robotNode","filter","nodeName","pop","processRobot","robot","robotNodes","toLowerCase","materials","getAttribute","m","processMaterial","visualMap","colliderMap","l","isRoot","querySelector","processLink","j","processJoint","jointList","Object","uniqueJoints","Set","iterFunction","has","add","mimicTag","find","n","parent","child","xyz","axisNode","axisXYZ","normalize","masterJointName","masterJoint","link","target","visualNodes","vn","processLinkElement","hasAttribute","collisionNodes","cn","node","matNodes","material","MeshPhongMaterial","rgba","color","setRGB","opacity","transparent","depthWrite","filename","loader","TextureLoader","filePath","colorSpace","SRGBColorSpace","isCollisionNode","materialNode","group","geoType","scaleAttr","scale","err","Mesh","_x","_y","_z","_w","primitiveModel","geometry","BoxGeometry","size","SphereGeometry","radius","CylinderGeometry","PI","done","STLLoader","geom","mesh","ColladaLoader","dae","scene"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}